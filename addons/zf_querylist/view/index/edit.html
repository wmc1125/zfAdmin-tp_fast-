

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>采集插件</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="__STATIC__/style/layui/css/layui.css" media="all">
</head>
<body>

  <div class="layui-fluid">
      <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
          <div class="layui-card">
            
            <div class="layui-card-body">
              <form class="layui-form info_tj" onclick="return false;" >
                <input type="hidden" name="id" value="{$res.id}">
                <blockquote class="layui-elem-quote">
                  基本信息
                </blockquote>
                <div class="layui-row layui-col-space10 layui-form-item">
                  <div class="layui-col-lg6">
                    <label class="layui-form-label">名称:</label>
                    <div class="layui-input-block">
                      <input type="text" name="name"  placeholder="" autocomplete="off" class="layui-input" value="{$res.name}">
                    </div>
                  </div> 
                </div>
                <div class="layui-row layui-col-space10 layui-form-item">
                  <div class="layui-col-lg6">
                    <label class="layui-form-label">网址:</label>
                    <div class="layui-input-block">
                      <input type="text" name="domain"  placeholder="" autocomplete="off" class="layui-input domain" value="{$res.domain}">
                    </div>
                  </div> 
                </div>
                <div class="layui-row layui-col-space10 layui-form-item">
                    <div class="layui-col-lg6">
                      <label class="layui-form-label">字符集(采集站):</label>
                      <div class="layui-input-block">
                        <input type="text" name="charact"  placeholder="" autocomplete="off" class="layui-input charact" value="{$res.charact}">
                      </div>
                    </div> 
                  </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">描述:</label>
                  <div class="layui-input-block">
                    <textarea name="summary" placeholder="" class="layui-textarea">{$res.summary}</textarea>
                  </div>
                </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">分类:</label>
                  <div class="layui-input-block">
                    <select name="cate_id" lay-verify="required" lay-filter="aihao">
                       <option value="{$res.cate_id}"><?php echo p_name($res['cate_id']); ?></option>
                      <?php foreach($plist as $k=>$vo):?>
                        <option value="{$vo['cid']}">{$vo['cname']}</option>
                      <?php  endforeach; ?>
                     </select>
                  </div>
                </div>
                
                <div class="layui-form-item">
                  <label class="layui-form-label">状态:</label>
                  <div class="layui-input-block">
                    <input type="radio" name="status" value="1" title="开启" <?php echo $res['status']==1?'checked':''; ?> ><div class="layui-unselect layui-form-radio"><i class="layui-anim layui-icon"></i><div>开启</div></div>
                    <input type="radio" name="status" value="0" title="关闭" <?php echo $res['status']==0?'checked':''; ?>><div class="layui-unselect layui-form-radio"><i class="layui-anim layui-icon"></i><div>关闭</div></div>
                  </div>
                </div>
                <blockquote class="layui-elem-quote">
                  采集链接列表设置
                </blockquote>

                <div class="layui-form-item">
                  <label class="layui-form-label">列表URL:</label>
                  <div class="layui-input-block">
                    <input type="text" name="cj_list_url"  placeholder="" autocomplete="off" class="layui-input cj_list_url" value="{$res.cj_list_url}">
                  </div>
                </div>
                <div class="layui-row layui-col-space12 layui-form-item">
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">标题规则:</label>
                    <div class="layui-input-block">
                      <input type="text" name="cj_list_label_title"  placeholder="" autocomplete="off" class="layui-input cj_list_label_title" value="{$res.cj_list_label_title}">
                    </div>
                  </div>
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">链接规则:</label>
                    <div class="layui-input-block">
                      <input type="text" name="cj_list_label_url"  placeholder="" autocomplete="off" class="layui-input cj_list_label_url" value="{$res.cj_list_label_url}">
                    </div>
                  </div>
                </div>
                <div class="layui-row layui-col-space12 layui-form-item">
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">开始N:</label>
                    <div class="layui-input-block">
                      <input type="text" name="cj_list_url_num_s"  placeholder="" autocomplete="off" class="layui-input cj_list_url_num_s" value="{$res.cj_list_url_num_s}">
                    </div>
                  </div>
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">结束N:</label>
                    <div class="layui-input-block">
                      <input type="text" name="cj_list_url_num_e"  placeholder="" autocomplete="off" class="layui-input cj_list_url_num_e" value="{$res.cj_list_url_num_e}">
                    </div>
                  </div>
                  <div class="layui-col-lg1">
                    <a href="javascript:;" class="layui-btn list_cj_test">列表采集测试</a>
                  </div>
                </div>
                
                <blockquote class="layui-elem-quote">
                  采集内容详情设置
                </blockquote>
                
                <div class="layui-form-item">
                  <label class="layui-form-label">标题规则:</label>
                  <div class="layui-input-block">
                    <input type="text" name="cj_content_label_title"  placeholder="" autocomplete="off" class="layui-input cj_content_label_title"  value="{$res.cj_content_label_title}">
                  </div>
                </div>
                <div class="layui-form-item">
                  <label class="layui-form-label">内容规则:</label>
                  <div class="layui-input-block">
                    <input type="text" name="cj_content_label_content"  placeholder="" autocomplete="off" class="layui-input cj_content_label_content" value="{$res.cj_content_label_content}">
                  </div>
                </div>
                <div class="layui-row layui-col-space12 layui-form-item">
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">图片地址:</label>
                    <div class="layui-input-block">
                      <input type="text" name="oriweb"  placeholder="" autocomplete="off" class="layui-input oriweb" value="{$res.oriweb}">
                    </div>
                  </div>
                  <div class="layui-col-lg5">
                    <label class="layui-form-label">图片字段:</label>
                    <div class="layui-input-block">
                      <input type="text" name="param_src"  placeholder="" autocomplete="off" class="layui-input param_src" value="{$res.param_src}">
                    </div>
                  </div>
                </div>
                <div class="layui-row layui-col-space12 layui-form-item">
                  <div class="layui-col-lg10">
                    <label class="layui-form-label">内容页测试地址:</label>
                    <div class="layui-input-block">
                      <input type="text" name="cj_content_test_url"  placeholder="" autocomplete="off" class="layui-input cj_content_test_url" value="{$res.cj_content_test_url}">
                    </div>
                  </div>
                  <div class="layui-col-lg2">
                    <a href="javascript:;" class="layui-btn content_cj_test">内容采集测试</a>
                  </div>
                </div>

                <div class="layui-form-item">
                  <div class="layui-input-block">
                    <button class="layui-btn " onclick="tijiao_data('zf_querylist.index/edit')"  lay-submit="" lay-filter="component-form-element">立即提交</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        
          
          
        </div>
        
      </div>
    </div>

  <script src="__STATIC__/style/layui/layui.js"></script>  
  <script type="text/javascript" src="__STATIC__/system/common.js"></script>  

  <script>
  layui.use(['form', 'upload','layer'], function(){
    var $ = layui.$
    ,form = layui.form
    ,layer = layui.layer
    ,upload = layui.upload ;

    $('.list_cj_test').on('click',function(){
        var index1 = layer.load(2);
    	var cj_list_label_title = $('.cj_list_label_title').val();
    	var cj_list_label_url = $('.cj_list_label_url').val();
    	var cj_list_url_num_s = $('.cj_list_url_num_s').val();
    	var cj_list_url_num_e = $('.cj_list_url_num_e').val();
    	var cj_list_url = $('.cj_list_url').val();
    	var charact = $('.charact').val();
    	var domain = $('.domain').val();
    	$.ajax({
          type:'post',
          url:"{:url('addons/zf_querylist.index/list_cj_test')}",
          data:{cj_list_label_title,cj_list_label_url,cj_list_url_num_s,cj_list_url_num_e,cj_list_url,domain,charact},
          dataType:'json',
          success:function(res){
            // console.log(res)
              layer.close(index1)
            if(res.result==1){
  				layer.open({
  				  type: 1,
  				  skin: 'layui-layer-rim', //加上边框
  				  area: ['800px', '500px'], //宽高
  				  content: res.msg
  				});
              }else{
                layer.msg(res.msg, {icon: 2});
              }
            }
        	})
      })
     $('.content_cj_test').on('click',function(){
        var index2 = layer.load(2);
    	var cj_content_label_title = $('.cj_content_label_title').val();
    	var cj_content_label_content = $('.cj_content_label_content').val();
      var cj_content_test_url = $('.cj_content_test_url').val();
      var oriweb = $('.oriweb').val();
    	var param_src = $('.param_src').val();
    	var domain = $('.domain').val();
    	var charact = $('.charact').val();
    	$.ajax({
          type:'post',
          url:"{:url('addons/zf_querylist.index/content_cj_test')}",
          data:{domain,cj_content_test_url,cj_content_label_content,cj_content_label_title,oriweb,param_src,charact},
          dataType:'json',
          success:function(res){
            // console.log(res)
              layer.close(index2)
            if(res.result==1){
				layer.open({
				  type: 1,
				  skin: 'layui-layer-rim', //加上边框
				  area: ['800px', '500px'], //宽高
				  content: res.msg
				});
            }else{
              layer.msg(res.msg, {icon: 2});
            }
          }
      	})
    })

    
    
    
  })
  </script>
</body>
</html>